contracts
=========

Solidity smart contracts for the Berse bridging framework. Compiled with `sol-compiler` and TypeScript wrappers generated by `abi-gen`. Note that some contracts use libraries, so the bytecode is unlinked before running the deployer.

## Organisation

There is still quite a lot of cruft floating around, so I'll highlight the stable contracts:

 - **`events/`**: contains the EventEmitter and EventListener contracts, which are responsible for emitting events to other chains, processing state updates, and verifying cross-chain events. 
 - **`bridge/`**: contains the token bridge, which uses cross-chain events to bridge ERC20's.
 - **`libs/`**: contains the `SparseMerkleTree` and `MerkleTreeVerifier` libraries, principally used in the events system.


## Usage

The example below connects to the deployed Bridge contract on the Kovan test network.

```typescript
import { BridgeContract } from "@ohdex/contracts/lib/build/bridge";
import { getContractAbi } from "@ohdex/shared";

let networkConf = require("@ohdex/config").networks.kovan;

let pe = new Web3ProviderEngine();
pe.addProvider(new RPCSubprovider(networkConf.rpcUrl))
pe.start()
let web3 = new Web3Wrapper(pe);

const Bridge = new BridgeContract(
    getContractAbi('Bridge'),
    networkConf.bridgeAddress,
    pe
);
```
